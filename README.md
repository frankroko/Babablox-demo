# Babablox (Vite + React + Tailwind CSS v4)

A Thai-language e-commerce demo for buying/selling game accounts and in-game items. The project has been migrated from static HTML/CSS/JS to Vite + React with Tailwind CSS v4 and SweetAlert2.

## Tech Stack

- Vite 7
- React 18
- React Router
- Tailwind CSS v4
- SweetAlert2
- Sharp (image optimization script)
- Express 5
- MongoDB (Mongoose)
- JWT + bcrypt authentication

## Project Structure

```text
babablox-demo/
  index.html            # Vite entry HTML
  package.json          # Scripts + dependencies
  vite.config.js        # Vite config (React + Tailwind v4 plugin)
  public/
    assets/             # Source images
    assets-optimized/   # Optimized WebP images (generated by script)
  scripts/
    optimize-images.mjs # Image optimization pipeline (Sharp -> WebP)
  src/
    main.jsx            # React entry
    App.jsx             # App shell + routes
    styles.css          # Tailwind v4 import + shared styles
    components/         # Navbar, Footer, Product UI
    pages/              # Route pages (Home, Products, Cart, Orders, Auth)
    data/               # Product data
    utils/              # Alerts, storage, app context
```

## Getting Started

Prerequisites: Node.js 18+ recommended.

Install dependencies:

```bash
npm install
```

Run the dev server:

```bash
npm run dev
```

Create a production build:

```bash
npm run build
```

Preview the production build locally:

```bash
npm run preview
```

## Backend Setup

Create a `.env` file using `.env.example` as a starting point.

Required environment variables:
- `MONGODB_URI`
- `JWT_SECRET`

Optional environment variables:
- `PORT`
- `MONGODB_DBNAME`
- `JWT_EXPIRES_IN`
- `CORS_ORIGIN`
- `ADMIN_EMAIL`
- `JWT_COOKIE`
- `COOKIE_SECURE`
- `VITE_API_URL` (for the frontend)

Run the API server:

```bash
npm run dev:server
```

Seed the product catalog (optional):

```bash
npm run seed:products
```

## API Overview

Auth:
- `POST /api/auth/register`
- `POST /api/auth/login`
- `GET /api/auth/me`
- `POST /api/auth/logout`

Products:
- `GET /api/products`
- `GET /api/products/:id`
- `POST /api/products` (admin)
- `PATCH /api/products/:id` (admin)
- `DELETE /api/products/:id` (admin)

Cart:
- `GET /api/cart`
- `POST /api/cart/items`
- `PATCH /api/cart/items/:itemId`
- `DELETE /api/cart/items/:itemId`
- `DELETE /api/cart`

Orders:
- `POST /api/orders`
- `GET /api/orders`
- `GET /api/orders/:id`
- `PATCH /api/orders/:id/status` (admin)

Admin:
- `GET /api/admin/users`
- `GET /api/admin/orders`

## Image Optimization

Optimize images into WebP files under `public/assets-optimized`:

```bash
npm run optimize:images
```

Notes:
- The app currently references images from `public/assets-optimized`.
- If you add new images to `public/assets`, run the optimizer again.

## Key Behavior

- Auth uses JWT stored in `localStorage`; cart and orders are loaded from the API.
- Orders route (`/orders`) requires login.
- The mobile navbar uses a burger menu with an animated close state.
- The frontend now uses the backend APIs for auth, cart, and orders.

## Scripts

- `npm run dev`: start Vite dev server
- `npm run build`: production build
- `npm run preview`: preview production build
- `npm run optimize:images`: generate optimized WebP assets
